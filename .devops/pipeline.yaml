trigger: none

resources:
  pipelines:
  - pipeline: renew
    source: web.temporal.internal.dev.p4pa.pagopa.it
    trigger: 
      branches:
        include: 
        - test-pipeline
  
pool:
  vmImage: ubuntu-latest

jobs:
- job: useOutput
  steps:
#  - download: renew
#    artifact: 
  - task: DownloadBuildArtifacts@1
    inputs:
      buildType: 'specific'
      pipeline: renew
      project: 'p4pa-projects'
      buildVersionToDownload: 'latest'
      downloadType: 'single'
      artifactName: 'shared-output'
      downloadPath: '$(System.ArtifactsDirectory)'

  - script: |
      echo "Leggo la versione dal file:"
      VERSION=$(cat $(Pipeline.Workspace)/renew/shared-output/version.txt)
      echo "VERSION = $VERSION"